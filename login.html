<script>
(async () => {
  const base = 'https://eyupdogan1907.github.io/yarim-kalan-hikayeler/';
  const res = await fetch(base + 'kullanicilar.json', { cache: 'no-store' });
  const users = await res.json();

  const html = users.map(u => `
    <a class="card" href="profil.html?id=${u.id}" data-id="${u.id}">
      <img src="${base + u.profilFoto}" alt="${u.ad}">
      <h3>${u.ad}</h3>
      <small>${u.konum ?? '-'}</small>
    </a>
  `).join('');

  const list = document.getElementById('user-list');
  list.innerHTML = html;

  // Tıklanınca seçili kullanıcıyı kaydet
  list.addEventListener('click', (e) => {
    const a = e.target.closest('a[data-id]');
    if (!a) return;
    const id = Number(a.dataset.id);
    localStorage.setItem('secili_kullanici_id', String(id));
  });
})();
</script>
