<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>Yarım Kalan Hikayeler - Giriş</title>
</head>
<body>
  <h1>Yarım Kalan Hikayeler</h1>
  <p>Kullanıcı seçin:</p>
  <select id="userSelect"></select>
  <button onclick="login()">Giriş</button>

  <script>
  async function loadUsers() {
    try {
      const response = await fetch("users.json");
      const data = await response.json();
      const select = document.getElementById("userSelect");

      data.users.forEach(user => {
        const option = document.createElement("option");
        option.value = user.id;
        option.textContent = user.ad;
        select.appendChild(option);
      });
    } catch (err) {
      console.error("Kullanıcılar yüklenemedi:", err);
    }
  }

  function login() {
    const id = document.getElementById("userSelect").value;
    if (id) {
      window.location.href = profil.html?id=${id};  <!-- ✅ düzeltildi -->
    } else {
      alert("Lütfen bir kullanıcı seçin.");
    }
  }

  loadUsers();
  </script>
</body>
</html>
