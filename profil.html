<!doctype html>
<html lang="tr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Yarım Kalan Hikayeler · Profil</title>
<style>
  :root{--bg:#0b1220;--card:#0f172a;--ink:#e5e7eb;--muted:#94a3b8;--line:#1f2937}
  *{box-sizing:border-box} body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;background:#0b1220;color:var(--ink)}
  header{padding:10px 14px;border-bottom:1px solid var(--line);background:#0f172a;position:sticky;top:0;z-index:10}
  .wrap{max-width:900px;margin:0 auto}
  .build{font-size:12px;color:#a7f3d0}
  .btn{appearance:none;border:1px solid var(--line);background:#111827;color:var(--ink);border-radius:10px;padding:8px 12px;cursor:pointer}
  main{padding:16px}
  .grid{display:grid;grid-template-columns:280px 1fr;gap:18px}
  .card{background:var(--card);border:1px solid var(--line);border-radius:14px;overflow:hidden}
  img{width:100%;height:300px;object-fit:cover;display:block}
  .p16{padding:16px}
  .muted{color:var(--muted)}
  @media (max-width:760px){.grid{grid-template-columns:1fr}}
  .err{color:#fecaca;background:#7f1d1d;border:1px solid #ef4444;padding:8px 10px;border-radius:8px}
</style>
</head>
<body>
  <header>
    <div class="wrap" style="display:flex;gap:10px;align-items:center">
      <strong>Yarım Kalan Hikayeler</strong>
      <span class="build">BUILD v405 — hata yakalayıcı</span>
      <span style="flex:1"></span>
      <a class="btn" href="login.html?v=405">Kullanıcı değiştir</a>
      <button class="btn" id="clearBtn">Seçileni temizle</button>
    </div>
  </header>

  <main class="wrap">
    <div id="status" class="muted" style="margin-bottom:12px">Yükleniyor…</div>
    <div class="grid">
      <section class="card">
        <img id="photo" alt="Profil">
        <div class="p16">
          <h2 id="name">—</h2>
          <p id="ageBio" class="muted">—</p>
          <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:8px" id="tags"></div>
          <div style="margin-top:12px;display:flex;gap:10px">
            <button class="btn" id="btnSelam">Selam ver</button>
            <button class="btn" id="btnMesaj">Mesaj isteği</button>
          </div>
        </div>
      </section>
      <section>
        <div class="card p16">
          <h3 style="margin:0 0 8px">Hakkında</h3>
          <p id="about" class="muted">—</p>
        </div>
        <div class="card p16" style="margin-top:14px">
          <h3 style="margin:0 0 8px">Son karşılaşmalar</h3>
          <ul id="meets" class="muted" style="padding-left:18px;margin:0"><li>—</li></ul>
        </div>
      </section>
    </div>
  </main>

<script>
(function(){
  const $ = id => document.getElementById(id);
  const set = (id,t)=>$(id).textContent=t;

  try {
    // 1) Mini veri (sıfır risk)
    const USERS = {
      ayse:{id:"ayse",ad:"Ayşe Y.",yas:27,bio:"M2 · 08:30 · kitap & kahve",
        fotograf:"https://picsum.photos/seed/ayse/900/600",
        etiketler:["Kitapkurdu","Yürüyüş","Kahve"],
        hakkinda:"Sakin, güleryüzlü; klasik müzik, kısa yürüyüşler.",
        karsilasmalar:["Levent - 12 Ağu","Taksim - 14 Ağu","Şişli - 15 Ağu"]},
      mehmet:{id:"mehmet",ad:"Mehmet K.",yas:30,bio:"18:10 · bisiklet & satranç",
        fotograf:"https://picsum.photos/seed/mehmet/900/600",
        etiketler:["Satranç","Belgesel","Bisiklet"],
        hakkinda:"Teknoloji meraklısı; hafta sonu orman turu.",
        karsilasmalar:["Gayrettepe - 10 Ağu","Osmanbey - 14 Ağu"]},
      elif:{id:"elif",ad:"Elif T.",yas:25,bio:"09:05 · klasik müzik & fotoğraf",
        fotograf:"https://picsum.photos/seed/elif/900/600",
        etiketler:["Fotoğraf","Klasik müzik","Açık hava"],
        hakkinda:"Açık tenli, başörtülü; şehir içi kısa kaçamaklar.",
        karsilasmalar:["Yenikapı - 9 Ağu","Haliç - 13 Ağu","Şişli - 15 Ağu"]}
    };

    // 2) Seçim
    const qs = new URLSearchParams(location.search);
    let uid = (qs.get('id') || localStorage.getItem('yklh_selectedUserId') || 'ayse').toLowerCase();
    if(!USERS[uid]) uid = 'ayse';
    localStorage.setItem('yklh_selectedUserId', uid);

    // 3) UI
    const u = USERS[uid];
    $('photo').src = u.fotograf;
    set('name', u.ad);
    set('ageBio', ${u.yas} • ${u.bio});
    set('about', u.hakkinda);

    const tags = $('tags'); tags.innerHTML='';
    (u.etiketler||[]).forEach(t=>{
      const s=document.createElement('span');
      s.className='muted'; s.style.border='1px dashed #334155';
      s.style.padding='4px 8px'; s.style.borderRadius='999px';
      s.textContent=t; tags.appendChild(s);
    });

    const meets = $('meets'); meets.innerHTML='';
    (u.karsilasmalar||[]).forEach(m=>{
      const li=document.createElement('li'); li.textContent=m; meets.appendChild(li);
    });

    set('status', Yüklendi · kullanıcı: ${u.id} · ${new Date().toLocaleTimeString()});

    $('btnSelam').onclick = ()=>alert(“${u.ad}” kişisine selam gönderildi ✔);
    $('btnMesaj').onclick = ()=>alert(“${u.ad}” için mesaj isteği kuyrukta ✔);
    $('clearBtn').onclick = ()=>{
      localStorage.removeItem('yklh_selectedUserId');
      alert('Seçim temizlendi. Sayfa yenilenecek.'); location.reload();
    };

  } catch(err){
    const s = document.getElementById('status');
    s.className = 'err';
    s.textContent = 'Hata: ' + (err && err.message ? err.message : err);
  }
})();
</script>
</body>
</html>
