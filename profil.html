<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Profil</title>
  <style>
    body { font-family: Arial, sans-serif; text-align: center; padding: 20px; }
    img { max-width: 200px; border-radius: 10px; margin-bottom: 10px; }
    .bio { margin: 10px 0; font-style: italic; }
  </style>
</head>
<body>

<div id="profil"></div>

<script>
  const profilDiv = document.getElementById("profil");

  // URL parametresinden kullanıcı ID'sini al
  const params = new URLSearchParams(window.location.search);
  const userId = params.get("id");

  if (!userId) {
    profilDiv.innerHTML = "<p>Kullanıcı bulunamadı</p>";
  } else {
    profilDiv.innerHTML = "<p>Yükleniyor...</p>";

    fetch("https://eyupdogan1907.github.io/yarim-kalan-hikayeler/data/users.json")
      .then(r => {
        if (!r.ok) throw new Error("JSON yüklenemedi");
        return r.json();
      })
      .then(users => {
        const user = users.find(u => String(u.id) === String(userId));
        if (!user) {
          profilDiv.innerHTML = "<p>Kullanıcı bulunamadı</p>";
          return;
        }

        profilDiv.innerHTML = `
          <img src="${user.profilFoto}" alt="Profil fotoğrafı">
          <h2>${user.ad}</h2>
          <p><strong>Konum:</strong> ${user.konum}</p>
          <p class="bio">${user.bio}</p>
          <p><strong>Pi Bakiyesi:</strong> ${user.piBakiyesi}</p>
          <p><a href="login.html">Çıkış yap</a></p>
        `;
      })
      .catch(err => {
        profilDiv.innerHTML = "<p>Bir hata oluştu: " + err.message + "</p>";
      });
  }
</script>

</body>
</html>
