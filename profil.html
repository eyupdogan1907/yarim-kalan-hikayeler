<!doctype html>
<meta charset="utf-8">
<title>Profil • YKH</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
  body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;margin:0;background:#fafafa}
  header{display:flex;gap:8px;align-items:center;padding:12px 16px;border-bottom:1px solid #eee;background:#fff}
  header a{font-size:14px;color:#06f;text-decoration:none}
  .wrap{max-width:840px;margin:16px auto;padding:0 16px}
  .hero{aspect-ratio:16/9;background:#eee;border-radius:12px;overflow:hidden}
  .hero img{width:100%;height:100%;object-fit:cover;display:block}
  .name{font-size:26px;font-weight:700;margin:14px 0 4px}
  .tags{color:#666}
  .nav{margin-top:14px;display:flex;gap:8px}
  .btn{padding:10px 14px;border:1px solid #ddd;border-radius:10px;background:#fff;cursor:pointer}
</style>
<header>
  <a href="index.html">← Anasayfa</a>
</header>
<div class="wrap">
  <div class="hero"><img id="avatar" alt="Profil foto"></div>
  <div class="name" id="name">Yükleniyor…</div>
  <div class="tags" id="tags"></div>
  <div class="nav">
    <button class="btn" id="prev">⟵ Önceki</button>
    <button class="btn" id="next">Sonraki ⟶</button>
  </div>
</div>
<script>
const q = new URLSearchParams(location.search);
let curId = Number(q.get("id")) || 1;
let users = [];

function show(id){
  const u = users.find(x=>Number(x.id)===Number(id)) || users[0];
  curId = u.id;
  const img=document.getElementById("avatar");
  img.src = assets/${u.photo}?v=${Date.now()};
  img.onerror = ()=>{ img.src="assets/ali.jpg"; }; // basit yedek
  document.getElementById("name").textContent = u.name;
  document.getElementById("tags").textContent = (u.tags||[]).join(" • ");
  history.replaceState(null,"",?id=${encodeURIComponent(u.id)});
}

fetch("data/users.json?v="+Date.now())
  .then(r=>r.json())
  .then(list=>{
    users = list;
    show(curId);
    document.getElementById("prev").onclick = ()=>{
      const i = users.findIndex(u=>u.id==curId);
      const ni = (i-1+users.length)%users.length;
      show(users[ni].id);
    };
    document.getElementById("next").onclick = ()=>{
      const i = users.findIndex(u=>u.id==curId);
      const ni = (i+1)%users.length;
      show(users[ni].id);
    };
  });
</script>
