<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8">
  <title>Profil – YKH</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="css/style.css" rel="stylesheet">
</head>
<body>
  <header class="topbar">
    <a class="link" href="index.html">← Ana sayfa</a>
    <h1 id="title">Profil</h1>
  </header>

  <main class="container">
    <div id="profileCard" class="card"></div>

    <div class="navrow">
      <button class="btn" id="prevBtn">← Önceki</button>
      <button class="btn" id="nextBtn">Sonraki →</button>
    </div>
  </main>

  <script src="js/app.js"></script>
  <script>
    let users = [];
    let idx = 0;

    function showByIndex(i){
      idx = (i + users.length) % users.length;
      const u = users[idx];
      App.renderProfile(u, document.getElementById('profileCard'));
      document.getElementById('title').textContent = u.name;
      history.replaceState({}, '', profil.html?id=${encodeURIComponent(u.id)});
    }

    App.loadUsers().then(list => {
      users = list;
      const id = App.getParam('id');
      const startIndex = id ? Math.max(0, users.findIndex(u => u.id === id)) : 0;
      showByIndex(startIndex);
    });

    document.getElementById('prevBtn').onclick = () => showByIndex(idx - 1);
    document.getElementById('nextBtn').onclick = () => showByIndex(idx + 1);
  </script>
</body>
</html>
