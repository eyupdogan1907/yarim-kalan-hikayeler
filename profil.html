<!doctype html><html lang="tr"><meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Profil (debug)</title>
<body style="font-family:system-ui;background:#ffd400;text-align:center">
  <p id="status" style="margin:24px">Yükleniyor…</p>
  <img id="photo" style="width:150px;height:150px;object-fit:cover;border-radius:50%;background:#fff">
  <h2 id="name"></h2>
  <p id="loc"></p>
  <p id="bal"></p>
  <p id="err" style="color:#b00"></p>

<script>
function qp(n){return new URLSearchParams(location.search).get(n);}
(async()=>{
  try{
    const idStr = qp('id'); 
    document.getElementById('status').textContent = 'URL id=' + idStr;
    const id = Number(idStr);
    if(!id){ throw new Error('ID parametresi yok veya sayı değil'); }

    const res = await fetch('kullanicilar.json',{cache:'no-store'});
    document.getElementById('status').textContent += ' | JSON=' + res.status;
    if(!res.ok) throw new Error('JSON bulunamadı: ' + res.status);

    const users = await res.json();
    const u = users.find(x=>Number(x.id)===id);
    if(!u) throw new Error('Kullanıcı bulunamadı: id=' + id);

    document.getElementById('name').textContent  = 'Kullanıcı: ' + (u.ad||'(yok)');
    document.getElementById('photo').src         = u.profilFoto||'';
    document.getElementById('loc').textContent   = 'Konum: ' + (u.konum||'-');
    document.getElementById('bal').textContent   = 'Pi Bakiyesi: ' + (u.piBakiyesi??'-');
    document.getElementById('status').textContent += ' | OK';
  }catch(e){
    document.getElementById('err').textContent = 'Hata: ' + e.message;
    console.error(e);
  }
})();
</script>
</body></html>
